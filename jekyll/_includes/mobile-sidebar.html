<!-- MOBILE SUBNAV /-->
<div class="sidebar-mobile-wrapper">
    <nav class="mobile-sidebar">
      {% assign url_slug = current_url | slugify %}

      {% for main-item in include.sidenav %}
        <ul>
          {% assign section_slug = main-item.name | slugify %}
          <li class="main-nav-item closed" data-section="{{ section_slug }}">
            <div class="list-wrap">
              {% if main-item.icon %}
                <img class="icon" src="{{ site.baseurl }}/assets/img/{{ main-item.icon }}">
              {% endif %}

              {% assign display_name = main-item.name %}

              {% if main-item.link %}
                {% assign link_slug = main-item.link | slugify %}
                <a class="{% if url_slug == link_slug %} active {% endif %}"
                  href="{{ site.baseurl }}/{{ main-item.link }}{% if sub-item.hash %}#{{sub-item.hash}}{% endif %}"
                  data-section="{{ section_slug }}"
                  data-proofer-ignore>{{ display_name}}</a>
              {% else %}
                <span class="nav-span">{{ display_name}}</span>
              {% endif %}

              {% if main-item.children %}
                <img class="arrow" crossorigin="anonymous" src="{{ site.baseurl }}/assets/img/docs/arrow-right.svg">
              {% endif %}
            </div>

            {% comment %} children of top level items {% endcomment %}
            {% if main-item.children %}
            <ul class="subnav">
              {% assign children = main-item.children | arrayify_hash %}
              {% for item in children %}
                {% assign display_name = item.name %}
              {% if item.children %}
                {% if item.name %}
                  <li class="nav-item">
                    {% if item.link %}
                      {% assign link_slug = item.link | slugify %}
                      <a class="{% if url_slug == link_slug %} active {% endif %}"
                        href="{{ site.baseurl }}/{{ item.link }}{% if item.hash %}#{{item.hash}}{% endif %}"
                        data-section="{{ section_slug }}"
                        data-proofer-ignore>{{ display_name }}
                      </a>
                    {% else %}
                      <span class="subheading">{{display_name}}</span>
                    {% endif %}
                  </li>
              {% endif %}

              <ul>
                {% assign children = item.children | arrayify_hash %}
                {% for sub-item in children %}
                {% assign display_name = sub-item.name %}
                <li class="subnav-item">
                  {% assign link_slug = sub-item.link | slugify %}
                  <a class="{% if url_slug == link_slug %} active {% endif %}"
                    href="{{ site.baseurl }}/{{ sub-item.link }}{% if sub-item.hash %}#{{sub-item.hash}}{% endif %}"
                    data-section="{{ section_slug }}"
                    data-proofer-ignore>{{ display_name }}</a>
                </li>
                {% endfor %}
              </ul>

              {% else %}

              {% assign display_name = item.name %}

              <li class="subnav-item">
                {% assign link_slug = item.link | slugify %}
                <a class="{% if url_slug == link_slug %} active {% endif %}"
                  href="{{ site.baseurl }}/{{ item.link }}{% if item.hash %}#{{item.hash}}{% endif %}"
                  data-section="{{ section_slug }}">
                  {{display_name}}
                </a>
              </li>

              {% endif %}
              {% endfor %}
            </ul>
            {% endif %}
          </li>
        </ul>
      {% endfor %}
    </nav>
</div>
